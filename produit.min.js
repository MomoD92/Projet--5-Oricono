'use strict';let main=document.getElementById("main"),queryString_url_id=window.location.search,urlSearchParams=new URLSearchParams(queryString_url_id),leID=urlSearchParams.get("id");
fetch(`http://localhost:3000/api/cameras/${leID}`).then(b=>{if(b.ok)return b.json();Promise.reject(b.status)}).then(b=>{let n=b.price/100;var e=document.createElement("div");e.classList.add("card","card-body","col-12","col-lg-6");var a=document.createElement("img");a.classList.add("img-fluid");a.src=b.imageUrl;a.alt=b.name;e.appendChild(a);main.appendChild(e);a=document.createElement("div");a.classList.add("card","col-12","col-lg-6","pb-3","bg-gradient-light");e=document.createElement("h2");e.innerHTML=
b.name;var c=document.createElement("p");c.classList.add("card-text");c.textContent=b.description;a.appendChild(e);a.appendChild(c);main.appendChild(a);e=document.createElement("form");c=document.createElement("label");c.for="quantiteProduit";c.textContent="Quantit\u00e9 : ";var f=document.createElement("input");f.id="quantiteProduit";f.type="number";f.min="1";f.setAttribute("value","1");e.appendChild(c);e.appendChild(f);c=document.createElement("div");c.classList.add("col-auto","my-1","pb-5","mt-4");
f=document.createElement("label");f.classList.add("mr-sm-2");f.setAttribute("for","inlineFormCustomSelect");f.textContent="Objectifs";c.appendChild(f);let k=document.createElement("select");k.classList.add("custom-select","mr-sm-2");k.setAttribute("id","inlineFormCustomSelect");b.lenses.forEach(d=>{let g=document.createElement("option");g.value=d;g.textContent=d;k.append(g)});c.appendChild(k);e.appendChild(c);a.appendChild(e);a=document.createElement("p");c=document.createElement("strong");c.id="prixTotal";
c.textContent="Prix total : ";f=document.createElement("span");f.innerHTML=n+"\u20ac";a.appendChild(c);a.appendChild(f);e.appendChild(a);a=document.createElement("button");a.id="btnAjoutId";a.type="button";a.classList.add("btn","btn-success");a.textContent="Ajouter au panier";e.appendChild(a);(function(d){document.getElementById("quantiteProduit").addEventListener("change",g=>{document.getElementById("prixTotal").textContent=`${d}`*`${g.target.value}`})})(n);document.getElementById("btnAjoutId").addEventListener("click",
d=>{d.preventDefault();d=document.getElementById("inlineFormCustomSelect");let g=document.getElementById("quantiteProduit"),l={_id:b._id,image:b.imageUrl,name:b.name,lense:d.value,quantite:g.value,totalPrice:b.price*parseInt(g.value)/100,price:b.price/100},h=JSON.parse(localStorage.getItem("produit"));d=()=>{h.push(l);localStorage.setItem("produit",JSON.stringify(h))};h?h.some(m=>m._id===l._id)?(d=h.filter(m=>m._id!==l._id),d.push(l),localStorage.setItem("produit",JSON.stringify(d))):d():(h=[],d(),
window.location.href="panier.html");window.location.href="panier.html"})}).catch(b=>{console.log(b)});